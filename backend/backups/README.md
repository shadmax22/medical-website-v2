# Database Backups

This directory contains database schema and data backups.

## Backup Types

### 1. Schema Backups (`schema-backup-*.json`)
- **Format:** JSON
- **Content:** Complete schema structure including fields, indexes, and metadata
- **Generated by:** `npm run backup:schema`
- **Usage:** Schema documentation, version control, migration planning

### 2. Database Backups (`database-backup-*.tar.gz`)
- **Format:** Compressed MongoDB dump
- **Content:** Complete database data and structure
- **Generated by:** `npm run backup:database`
- **Usage:** Full database restoration, disaster recovery

## Backup Commands

```bash
# Backup schema only (TypeScript/JSON)
npm run backup:schema

# Backup database only (MongoDB dump)
npm run backup:database

# Backup both schema and database
npm run backup:all
```

## Restoring Backups

### Restore Schema Backup
Schema backups are JSON files for reference. They cannot be directly restored but can be used to:
- Understand schema structure
- Generate migration scripts
- Document database changes

### Restore Database Backup
```bash
# Extract the backup
tar -xzf database-backup-YYYYMMDD_HHMMSS.tar.gz

# Restore using mongorestore
mongorestore --host localhost:27017 \
  --username admin \
  --password admin123 \
  --authenticationDatabase admin \
  --db hcl \
  backups/database-backup-YYYYMMDD_HHMMSS/hcl
```

## Backup Retention

- **Recommended:** Keep at least 7 daily backups, 4 weekly backups, and 12 monthly backups
- **Storage:** Consider moving older backups to cloud storage or external drives
- **Automation:** Set up cron jobs for automated backups

## Notes

- Backups are timestamped for easy identification
- Database backups include all collections and indexes
- Schema backups are lightweight and suitable for version control
- Always verify backups before deleting old data

